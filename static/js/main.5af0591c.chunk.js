(this["webpackJsonpbattleroyal-front"]=this["webpackJsonpbattleroyal-front"]||[]).push([[0],{52:function(e,t,a){},53:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var s=a(0),n=(a(48),a(1)),r=a.n(n),c=a(22),o=a.n(c),i=(a(52),a(19)),l=(a(53),a(54),a(55),a(12)),u=a(4),m=a(18),h=a(5),d=a(6),p=a(7),j=a(10),b=a(9),g=a(3),O=a.n(g);var f=Object(u.h)((function(e){return Object(s.jsx)("button",{variant:"primary",className:"custom-button",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),e.history.push("/login")},children:"D\xe9connexion"})})),x=a(41),v=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).styles={bmBurgerButton:{position:"fixed",width:"36px",height:"30px",left:"36px",top:"36px"},bmBurgerBars:{background:"#FFF"},bmBurgerBarsHover:{background:"#a90000"},bmCrossButton:{height:"24px",width:"24px"},bmCross:{background:"#FFF"},bmMenuWrap:{position:"fixed",height:"100%"},bmMenu:{background:"#373a47",padding:"2.5em 1.5em 0",fontSize:"1.15em"},bmMorphShape:{fill:"#373a47"},bmItemList:{color:"#b8b7ad",padding:"0.8em"},bmOverlay:{background:"rgba(0, 0, 0, 0.3)"}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=localStorage.getItem("token");return Object(s.jsxs)(x.slide,{styles:this.styles,children:[e?"":Object(s.jsx)("a",{className:"menu-btn",href:"/login",children:"Connexion"}),e?"":Object(s.jsx)("a",{className:"menu-btn",href:"/signup",children:"Inscription"}),e?Object(s.jsx)("a",{className:"menu-btn",href:"/createGame",children:"Cr\xe9er une partie"}):"",e?Object(s.jsx)("a",{className:"menu-btn",href:"/searchGame",children:"Rechercher une partie"}):"",e?Object(s.jsx)("a",{className:"menu-btn",href:"/currentGames",children:"Parties en cours"}):"",e?Object(s.jsx)("a",{className:"menu-btn",href:"/account",children:"Mon compte"}):"",e?Object(s.jsx)(f,{}):""]})}}]),a}(r.a.Component),y=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state=[],s.isError=!1,s.setIsError=!1,s.email="",s.password="",s.handleInputChange=s.handleInputChange.bind(Object(p.a)(s)),s.signin=s.signin.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(m.a)({},s,a))}},{key:"signin",value:function(e){var t=this;if(e.preventDefault(),this.err=!1,this.success=!1,!this.state.email||!this.state.password)return this.err="Vous n'avez pas remplis tous les champs",void alert(this.err);O.a.post("http://salty-forest-02915.herokuapp.com/api/login",{email:this.state.email,password:this.state.password}).then((function(e){200===e.status&&(t.success=!0,localStorage.setItem("token",e.data.token),O.a.get("http://salty-forest-02915.herokuapp.com/api/current-user",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){localStorage.setItem("userId",e.data),t.props.history.push("/searchGame")})))})).catch((function(e){alert(t.err),t.err="Une erreur est survenue lors de la connexion"}))}},{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"div-form",children:[Object(s.jsx)("h1",{className:"title-page",children:"Bienvenue !"}),Object(s.jsxs)("form",{className:"custom-form",onSubmit:this.signin,children:[Object(s.jsx)("label",{className:"custom-label",children:"Adresse email"}),Object(s.jsx)("input",{className:"custom-input",type:"email",value:this.state.email,onChange:this.handleInputChange,placeholder:"email",name:"email"}),Object(s.jsx)("label",{className:"custom-label",children:"Mot de passe"}),Object(s.jsx)("input",{className:"custom-input",type:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:"mot de passe",name:"password"}),Object(s.jsx)("input",{type:"submit",id:"mySubmit",className:"custom-button",value:"Se connecter"})]}),Object(s.jsx)(l.b,{to:"/forgot-password",children:"Mot de passe oubli\xe9 ?"}),Object(s.jsx)(l.b,{to:"/signup",children:"Je n'ai pas encore de compte ?"}),this.state.isError&&Object(s.jsx)("error",{children:"Utilisateur ou mot de passe incorrect"})]})]})}}]),a}(r.a.Component),N=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state={isError:!1},s.email="",s.password="",s.pseudo="",s.handleInputChange=s.handleInputChange.bind(Object(p.a)(s)),s.postSignUp=s.postSignUp.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"postSignUp",value:function(e){var t=this;if(e.preventDefault(),!this.state.email||!this.state.password)return this.err="Vous n'avez pas remplis tous les champs",void alert(this.err);O.a.post("http://salty-forest-02915.herokuapp.com/api/sign-up",{email:this.state.email,password:this.state.password,pseudo:this.state.pseudo}).then((function(e){200===e.status?t.props.history.push("/login"):t.setState({isError:!0})})).catch((function(e){t.setState({isError:!0})}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(m.a)({},s,a))}},{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"div-form",children:[Object(s.jsx)("h1",{className:"title-page",children:"Inscription"}),Object(s.jsxs)("form",{className:"custom-form",onSubmit:this.postSignUp,children:[Object(s.jsx)("label",{className:"custom-label",children:"Adresse email"}),Object(s.jsx)("input",{className:"custom-input",type:"email",name:"email",value:this.state.email,onChange:this.handleInputChange,placeholder:"Email"}),Object(s.jsx)("label",{className:"custom-label",children:"Mot de passe "}),Object(s.jsx)("input",{className:"custom-input",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:"Mot de passe"}),Object(s.jsx)("label",{className:"custom-label",children:"Pseudo "}),Object(s.jsx)("input",{className:"custom-input",type:"text",name:"pseudo",value:this.state.pseudo,onChange:this.handleInputChange,placeholder:"Pseudonyme"}),Object(s.jsx)("button",{className:"custom-button",children:"Sign Up"})]}),Object(s.jsx)(l.b,{to:"/login",children:"D\xe9j\xe0 un compte ?"}),this.state.isError?"Erreur lors de la cr\xe9ation de l'utilisateur":""]})]})}}]),a}(r.a.Component),C=Object(u.h)(N),S=a(11),k=new(function(){function e(){var t=this;Object(h.a)(this,e),this.formData=new FormData(void 0),this.setFormData=function(e){t.formData=e},this.loadData=function(e){t.state.resultGet=e},Object(S.f)(this,{setFormData:S.b,loadData:S.b,formData:S.g,createGameFormData:S.c})}return Object(d.a)(e,[{key:"createGameFormData",get:function(){return this.formData}}]),e}()),I=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=new FormData(n.form.current);k.setFormData(t),n.currentGameName=k.createGameFormData.get("gameNameInput"),n.currentPlayerNumber=k.createGameFormData.get("playerNumberSelect"),n.currentMap=k.createGameFormData.get("mapSelect"),n.formIsValid=""!==n.currentGameName&&0!==n.currentPlayerNumber&&""!==n.currentMap,n.render()},n.onSubmit=function(e){e.preventDefault(),n.createGame()},n.createGame=function(){O.a.post("http://salty-forest-02915.herokuapp.com/api/games",{owner:"/api/users/"+localStorage.getItem("userId"),name:n.currentGameName,code:"N/A",round:1,map:n.currentMap,date:"2021-01-29"},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){200!==e.status&&201!==e.status||n.createPlayer(e.data.id)})).catch((function(e){console.log(e),alert(e)}))},n.createPlayer=function(e){O.a.post("http://salty-forest-02915.herokuapp.com/api/players",{round:1,life:3,game:"/api/games/"+e,user:"/api/users/"+localStorage.getItem("userId")},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){201===t.status&&-1!==t.data.id&&(console.log("Creation du joueur r\xe9ussie, r\xe9cup\xe9ration de son identifiant pour rejoindre la nouvelle partie"),n.joinSaloon(e,t.data.id))})).catch((function(e){console.log("Echec de la creation du joueur"),console.log(e)}))},n.render=function(){return n.buttonSubmit=document.getElementById("mySubmit"),n.buttonSubmit&&n.formIsValid?n.buttonSubmit.disabled=!1:n.buttonSubmit&&!n.formIsValid&&(n.buttonSubmit.disabled=!0),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"div-form",children:[Object(s.jsx)("h1",{className:"title-page",children:"Cr\xe9er une partie"}),Object(s.jsxs)("form",{className:"custom-form",ref:n.form,onChange:n.onChange,onSubmit:n.onSubmit,children:[Object(s.jsx)("label",{className:"custom-label",children:"Nom de la partie"}),Object(s.jsx)("input",{className:"custom-input",type:"text",name:"gameNameInput"}),Object(s.jsx)("label",{className:"custom-label",children:"S\xe9lectionner la carte"}),Object(s.jsx)("select",{className:"custom-dropdown",name:"mapSelect",children:n.state.maps.map((function(e,t){return Object(s.jsx)("option",{value:e,children:e},t)}))}),Object(s.jsx)("input",{type:"submit",id:"mySubmit",className:"custom-button",disabled:!0,value:"Cr\xe9er le salon"})]})]})]})},n.form=r.a.createRef(),n.playerCreateForTheGame=-1,n.state={gameName:" ",playerNumbers:[1,2,3,4],maps:["Verte","Blue","Rouge"]},n}return Object(d.a)(a,[{key:"joinSaloon",value:function(e,t){this.props.history.push("/saloon/game/"+e+"/player/"+t)}}]),a}(n.Component),w=a(44);var G=function(){var e=Object(n.useState)(""),t=Object(w.a)(e,1)[0];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"div-form",children:[Object(s.jsx)("h1",{className:"title-page",children:"Acc\xe9der \xe0 votre compte"}),Object(s.jsxs)("form",{className:"custom-form",ref:this.form,onChange:this.onChange,children:[Object(s.jsx)("label",{className:"custom-label",children:"Inscrivez votre adresse email"}),Object(s.jsx)("input",{className:"custom-input",type:"email",name:t,placeholder:"Email"})]})]}),Object(s.jsx)("button",{id:"mySubmit",className:"custom-button",disabled:!0,children:"Continuer"}),Object(s.jsx)(l.b,{to:"/modify-password",children:"Modifier votre mot de passe"})]})},D=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).password="",s.passwordConfirm="",s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=document.querySelector(".double-password-input"),a=document.querySelector(".double-passwordConfirm-input");t.value===a.value?alert("Voulez-vous enregistrer votre mot de passe ? "+t.value):alert("Mot de passe error\xe9!!! Veuillez le modifier"),e.preventDefault()}},{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"global",children:[Object(s.jsx)("h4",{className:"title-page",children:"Modifiez votre mot de passe"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{className:"double-password-input",type:"text",value:this.password.value,placeholder:"mot de passe",onChange:this.handleChange,name:"password"}),Object(s.jsx)("input",{className:"double-passwordConfirm-input",type:"text",value:this.passwordConfirm.value,placeholder:"confirmer votre mot de passe",onChange:this.handleChange,name:"password-confirm"}),Object(s.jsx)("button",{className:"continous",onClick:this.handleSubmit,children:"Continuer"})]})]})]})}}]),a}(r.a.Component),F=a(24),A=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state={pseudo:"",email:"",password:"",alert:""},s.handleInputChange=s.handleInputChange.bind(Object(p.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(p.a)(s)),s.handleDeleteAccount=s.handleDeleteAccount.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("http://salty-forest-02915.herokuapp.com/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.setState({email:t.data.email,pseudo:t.data.pseudo?t.data.pseudo:""})})).catch((function(e){alert(e)}))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;this.setState(Object(m.a)({},s,a))}},{key:"handleSubmit",value:function(){var e=this;this.state.password&&O.a.put("http://salty-forest-02915.herokuapp.com/api/update-password/"+localStorage.getItem("userId"),{password:this.state.password},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){e.status})).catch((function(e){alert(e)})),O.a.put("http://salty-forest-02915.herokuapp.com/api/users/"+localStorage.getItem("userId"),{email:this.state.email,pseudo:this.state.pseudo},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&e.setState({alert:"Les modifications ont \xe9t\xe9 enregistr\xe9es."})})).catch((function(e){alert(e)}))}},{key:"handleDeleteAccount",value:function(){var e=this;O.a.delete("http://salty-forest-02915.herokuapp.com/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){204===t.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),e.props.history.push("/login"))})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)("div",{className:"title-page",children:"Compte"}),this.state.alert&&Object(s.jsx)("div",{className:"alert",children:this.state.alert}),Object(s.jsxs)("form",{className:"custom-form",children:[Object(s.jsx)("label",{className:"custom-label",children:"Pseudo"}),Object(s.jsx)("input",{type:"text",value:this.state.pseudo,onChange:this.handleInputChange,placeholder:"Pseudo",name:"pseudo",className:"custom-input"}),Object(s.jsx)("label",{className:"custom-label",children:"Changer adresse email"}),Object(s.jsx)("input",{type:"email",value:this.state.email,onChange:this.handleInputChange,placeholder:"Email",name:"email",className:"custom-input"}),Object(s.jsx)("label",{className:"custom-label",children:"Changer le mot de passe"}),Object(s.jsx)("input",{type:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:"Mot de passe",name:"password",className:"custom-input"})]}),Object(s.jsx)("button",{className:"custom-button",onClick:this.handleSubmit,children:"Sauvegarder"}),Object(s.jsx)(F.a,{trigger:Object(s.jsx)("button",{className:"custom-button",children:"Supprimer le compte"}),modal:!0,nested:!0,children:function(t){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{className:"close",onClick:t,children:"\xd7"}),Object(s.jsxs)("div",{className:"content",children:[Object(s.jsx)("button",{className:"custom-button",onClick:e.handleDeleteAccount,children:"Confirmer la suppression du compte"}),Object(s.jsx)("button",{className:"custom-button",onClick:t,children:"Annuler"})]})]})}})]})]})}}]),a}(r.a.Component),M=Object(u.h)(A),B=a(42),z=a(43),P=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state={games:[]},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("http://salty-forest-02915.herokuapp.com/api/games?players.user=/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&e.setState({games:t.data["hydra:member"]})})).catch((function(e){console.log(e)}))}},{key:"leaveGame",value:function(e,t,a){var s=this;O.a.get("http://salty-forest-02915.herokuapp.com/api/player-from-game/"+t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&O.a.delete("http://salty-forest-02915.herokuapp.com/api/players/"+t.data,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){if(204===t.status){var n=s.state.games;n.splice(e,1),s.setState({games:n}),a()}})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsx)("div",{className:"createGames",children:Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)("div",{className:"title-page",children:"Vos parties en cours"}),Object(s.jsxs)("table",{children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Nom"}),Object(s.jsx)("th",{children:"Statut"}),Object(s.jsx)("th",{children:"Nombre de tours"}),Object(s.jsx)("th",{})]})}),Object(s.jsx)("tbody",{children:this.state.games.map((function(t,a){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t.name}),Object(s.jsx)("td",{children:t.status}),Object(s.jsx)("td",{children:t.round}),Object(s.jsx)("td",{className:"exit-btn",children:Object(s.jsx)(F.a,{trigger:Object(s.jsx)(B.a,{icon:z.a}),modal:!0,nested:!0,children:function(n){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{className:"close",onClick:n,children:"\xd7"}),Object(s.jsxs)("div",{className:"content",children:[Object(s.jsx)("button",{className:"custom-button",onClick:e.leaveGame.bind(e,a,t.id,n),children:"\xcates-vous s\xfbr de vouloir quitter la partie ?"}),Object(s.jsx)("button",{className:"custom-button",onClick:n,children:"Annuler"})]})]})}})})]},a)}))})]})]})})]})}}]),a}(r.a.Component),E=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).myMap="",s.grid=[],s.state={inputLinkClicked:!1},s.handleAddSecondInput=s.handleAddSecondInput.bind(Object(p.a)(s)),s.onFinish=s.onFinish.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"generateMap",value:function(){this.myMap=Array.from({length:100},(function(){return{}}))}},{key:"handleAddSecondInput",value:function(){this.setState({inputLinkClicked:!0})}},{key:"setPosition",value:function(){}},{key:"onFinish",value:function(){var e=this;console.log(this.props),O.a.patch("http://salty-forest-02915.herokuapp.com/api/games/"+this.props.match.params.gameId,{lastPlayer:"/api/players/"+this.props.match.params.playerId},{headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/merge-patch+json"}}).then((function(t){200===t.status&&O.a.get("http://salty-forest-02915.herokuapp.com/api/current-player-game/"+e.props.match.params.gameId,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&O.a.get("http://salty-forest-02915.herokuapp.com/push/send-notification/"+t.data,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){200===t.status&&e.props.history.push("/currentGames")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return this.generateMap(),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"div-form",children:[Object(s.jsx)("div",{className:"map",onClick:this.handleAddSecondInput,children:this.myMap.map((function(t,a){return Object(s.jsx)("p",{className:"custom-p",onClick:e.handleAddSecondInput,children:a})}))}),Object(s.jsx)("button",{className:"custom-button",onClick:this.onFinish,children:"Finish turn"})]})]})}}]),a}(r.a.Component),R=Object(u.h)(E),V=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).onMapChange=function(e){"Toutes"!==n.statcurrentMapChange?n.setState({currentMapChange:e.target.value}):n.setState({currentMapChange:""})},n.onNameChange=function(e){n.setState({searchName:e.target.value})},n.filterGame=function(e){e.preventDefault(),n.state.currentMapChange||n.state.searchName?(n.setState({mapCreatedGame:[]}),O.a.get("http://salty-forest-02915.herokuapp.com/api/games?name[]="+n.state.searchName+"&map[]="+n.state.currentMapChange,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){200===e.status&&e.data["hydra:member"].map((function(e){return O.a.get("http://salty-forest-02915.herokuapp.com/api/players/?game=/api/games/"+e.id+"&user=/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){if(0===t.data["hydra:totalItems"]){var a=n.state.mapCreatedGame;a.push(e),n.setState({mapCreatedGame:a})}})),""}))})).catch((function(e){alert(e)}))):n.componentDidMount()},n.joinGame=function(e){O.a.post("http://salty-forest-02915.herokuapp.com/api/players",{round:1,life:3,game:"/api/games/"+e,user:"/api/users/"+localStorage.getItem("userId")},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){201===t.status&&n.props.history.push("/saloon/game/"+e+"/player/"+t.data.id)})).catch((function(e){alert(e)}))},n.componentDidMount=function(){O.a.get("http://salty-forest-02915.herokuapp.com/api/games",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){200===e.status&&e.data["hydra:member"].map((function(e){return O.a.get("http://salty-forest-02915.herokuapp.com/api/players/?game=/api/games/"+e.id+"&user=/api/users/"+localStorage.getItem("userId"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){if(0===t.data["hydra:totalItems"]){var a=n.state.mapCreatedGame;a.push(e),n.setState({mapCreatedGame:a})}})),""}))})).catch((function(e){alert(e)}))},n.render=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsx)("div",{className:"searchGames",children:Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)("div",{className:"title-page",children:"Rechercher une partie"}),Object(s.jsxs)("form",{ref:n.form,onSubmit:n.filterGame,children:[Object(s.jsx)("label",{className:"custom-label",children:"Rerchercher par nom"}),Object(s.jsx)("input",{type:"search",placeholder:"Rechercher par nom",name:"search",className:"custom-input",onChange:n.onNameChange,value:n.state.searchName}),Object(s.jsx)("label",{className:"custom-label",children:"Rechercher par carte"}),Object(s.jsx)("select",{className:"custom-dropdown",name:"mapSelect",onChange:n.onMapChange,children:n.state.maps.map((function(e,t){return Object(s.jsx)("option",{value:e,children:e},t)}))}),Object(s.jsx)("input",{type:"submit",id:"mySubmit",className:"custom-button",value:"Rechercher"})]}),Object(s.jsxs)("table",{className:"custom-table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Nom"}),Object(s.jsx)("th",{children:"Carte"}),Object(s.jsx)("th",{children:"Action"}),Object(s.jsx)("th",{})]})}),Object(s.jsx)("tbody",{children:n.state.mapCreatedGame.map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.name}),Object(s.jsx)("td",{children:e.map}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{className:"custom-button",onClick:function(){return n.joinGame(e.id)},children:"Rejoindre"})})]},e.id)}))})]})]})})]})},n.form=r.a.createRef(),n.state={mapCreatedGame:[],maps:["Toutes","Verte","Bleu","Rouge"],searchName:"",currentMapChange:""},n.onMapChange=n.onMapChange.bind(Object(p.a)(n)),n}return a}(n.Component),U=Object(u.h)(V),L=new(function(){function e(){Object(h.a)(this,e),this.games=[],this.formData=new FormData(void 0),this.resultGet="",Object(S.e)(this)}return Object(d.a)(e,[{key:"setFormData",value:function(e){this.formData=e}}]),e}()),T=a(100),q=Object(T.a)((function(e){var t=e.store,a=Object(n.useRef)(null),r=Object(u.f)(),c=Object(u.g)();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(v,{}),Object(s.jsx)("div",{onChange:function(e){var s=new FormData(a.current);t.setFormData(s)},ref:a,children:Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)("header",{className:"custom-header"}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{className:"custom-p",children:[" Nom de la partie : ",t.currentGame.name]}),Object(s.jsxs)("p",{className:"custom-p",children:["Propri\xe9t\xe9 : ",t.currentGame.property]}),Object(s.jsxs)("p",{className:"custom-p",children:[" Carte : ",t.currentGame.map]})]}),Object(s.jsxs)("table",{className:"custom-table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{}),Object(s.jsx)("th",{children:"Pseudo"})]})}),Object(s.jsx)("tbody",{children:t.currentGame.players.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{value:e.avatar,children:e.avatar}),Object(s.jsx)("td",{value:e.name,children:e.name})]},t)}))})]}),Object(s.jsx)("button",{className:"custom-button",onClick:function(){r.push("/map/game/"+c.gameId+"/player/"+c.playerId)},children:"Acc\xe9der \xe0 la partie"})]})})]})})),J=new(function(){function e(){Object(h.a)(this,e),this.currentGame={name:"Partie 1",property:"Private",map:"Blue",players:[{avatar:"avatar.PNG",name:"Player 1"},{avatar:"avatar.PNG",name:"Player 2"}]},this.formData=new FormData(void 0),Object(S.e)(this)}return Object(d.a)(e,[{key:"setFormData",value:function(e){this.formData=e}}]),e}()),H=a(45);var W=function(e){var t=e.component,a=Object(H.a)(e,["component"]);return Object(s.jsx)(u.b,Object(i.a)(Object(i.a)({},a),{},{render:function(e){return localStorage.getItem("token")?Object(s.jsx)(t,Object(i.a)({},e)):Object(s.jsx)(u.a,{to:"/login"})}}))};var K=function(){return document.body.style.backgroundColor="#053244",Object(s.jsxs)(l.a,{children:[Object(s.jsx)(u.b,{exact:!0,path:"/",render:function(e){return Object(s.jsx)(y,Object(i.a)({},e))}}),Object(s.jsx)(u.b,{path:"/login",render:function(e){return Object(s.jsx)(y,Object(i.a)({},e))}}),Object(s.jsx)(u.b,{path:"/signup",render:function(e){return Object(s.jsx)(C,Object(i.a)({},e))}}),Object(s.jsx)(u.b,{path:"/modify-password",component:D}),Object(s.jsx)(W,{path:"/forgot-password",component:G}),Object(s.jsx)(W,{path:"/map/game/:gameId/player/:playerId",component:R}),Object(s.jsx)(W,{path:"/createGame",component:I}),Object(s.jsx)(W,{path:"/account",component:M}),Object(s.jsx)(W,{path:"/saloon/game/:gameId/player/:playerId",component:function(){return Object(s.jsx)(q,{store:J})}}),Object(s.jsx)(W,{path:"/currentGames",component:P}),Object(s.jsx)(W,{path:"/searchGame",component:function(){return Object(s.jsx)(U,{store:L})}})]})};o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(K,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.5af0591c.chunk.js.map